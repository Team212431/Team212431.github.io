<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Creative Idea Generator 5.0</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #121212; --surface-dark: #1e1e1e; --primary-dark: #bb86fc; --secondary-dark: #03dac6; --text-dark: rgba(255, 255, 255, 0.87); --text-secondary-dark: rgba(255, 255, 255, 0.6); --border-dark: rgba(255, 255, 255, 0.12);
            --bg-light: #f5f5f5; --surface-light: #ffffff; --primary-light: #6200ee; --secondary-light: #018786; --text-light: rgba(0, 0, 0, 0.87); --text-secondary-light: rgba(0, 0, 0, 0.6); --border-light: rgba(0, 0, 0, 0.12);
        }
        html { height: 100%; }
        body {
            font-family: 'Kanit', sans-serif; margin: 0; transition: background-color 0.3s, color 0.3s;
            min-height: 100%; display: flex; flex-direction: column;
        }
        .container { width: 100%; max-width: 800px; margin: 0 auto; padding: 20px; display: flex; flex-direction: column; flex-grow: 1; }
        body { background-color: var(--bg-dark); color: var(--text-dark); }
        body.light-mode { background-color: var(--bg-light); color: var(--text-light); }

        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding-bottom: 20px; border-bottom: 1px solid var(--border-dark); flex-shrink: 0; }
        body.light-mode .header { border-bottom-color: var(--border-light); }
        .header h1 { margin: 0; font-size: 1.8rem; font-weight: 700; color: var(--primary-dark); }
        body.light-mode .header h1 { color: var(--primary-light); }
        .theme-switch { position: relative; display: inline-block; width: 50px; height: 24px; }
        .theme-switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #333; transition: .4s; border-radius: 34px; }
        .slider:before { position: absolute; content: ""; height: 16px; width: 16px; left: 4px; bottom: 4px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: var(--secondary-light); }
        input:checked + .slider:before { transform: translateX(26px); }

        .tabs { display: flex; flex-wrap: wrap; margin-bottom: 20px; flex-shrink: 0; }
        .tab-link { padding: 10px 15px; cursor: pointer; border: none; background: none; color: var(--text-secondary-dark); font-family: 'Kanit', sans-serif; font-size: 1rem; transition: all 0.3s; border-bottom: 3px solid transparent; }
        body.light-mode .tab-link { color: var(--text-secondary-light); }
        .tab-link.active { color: var(--primary-dark); font-weight: 600; border-bottom-color: var(--primary-dark); }
        body.light-mode .tab-link.active { color: var(--primary-light); border-bottom-color: var(--primary-light); }

        #tabs-content { flex-grow: 1; }
        .tab-content { display: none; height: 100%; }
        .tab-content.active { display: block; animation: fadeIn 0.5s; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .zone-card { background-color: var(--surface-dark); padding: 25px; border-radius: 12px; border: 1px solid var(--border-dark); display: flex; flex-direction: column; gap: 20px; height: 100%; }
        body.light-mode .zone-card { background-color: var(--surface-light); border-color: var(--border-light); box-shadow: 0 4px 12px rgba(0,0,0,0.08); }
        .prompt-display { padding: 20px; border-radius: 8px; background-color: var(--bg-dark); text-align: center; font-size: 1.2rem; font-weight: 500; color: var(--secondary-dark); border: 1px dashed var(--border-dark); }
        body.light-mode .prompt-display { background-color: var(--bg-light); color: var(--secondary-light); border-color: var(--border-light); }
        .form-group { display: flex; flex-direction: column; gap: 10px; }
        .form-group input, .form-group textarea, .mixer-group select { width: 100%; padding: 12px; border-radius: 8px; border: 1px solid var(--border-dark); background-color: var(--bg-dark); color: var(--text-dark); font-family: 'Kanit', sans-serif; font-size: 1rem; box-sizing: border-box; transition: border-color 0.3s, box-shadow 0.3s; }
        body.light-mode .form-group input, body.light-mode .form-group textarea, body.light-mode .mixer-group select { background-color: var(--bg-light); color: var(--text-light); border-color: var(--border-light); }
        .form-group textarea { min-height: 100px; resize: vertical; }
        .btn { padding: 12px 20px; font-family: 'Kanit', sans-serif; font-size: 1rem; font-weight: 600; border-radius: 8px; border: none; cursor: pointer; transition: all 0.2s; display: flex; align-items: center; justify-content: center; gap: 8px; }
        .btn:hover { filter: brightness(1.2); transform: translateY(-2px); }
        .btn-primary { background-color: var(--primary-dark); color: #000; }
        body.light-mode .btn-primary { background-color: var(--primary-light); color: #fff; }
        .btn-secondary { background-color: var(--secondary-dark); color: #000; }
        body.light-mode .btn-secondary { background-color: var(--secondary-light); color: #fff; }
        .btn-tertiary { background: none; border: 1px solid var(--border-dark); color: var(--text-secondary-dark); }
        body.light-mode .btn-tertiary { border-color: var(--border-light); }
        .btn-group { display: flex; gap: 10px; }

        .gimmick-container { background-color: var(--bg-dark); padding: 20px; border-radius: 8px; border: 1px solid var(--border-dark); }
        body.light-mode .gimmick-container { background-color: var(--bg-light); border-color: var(--border-light); }
        .gimmick-title { font-weight: 600; margin-bottom: 15px; color: var(--text-secondary-dark); border-bottom: 1px solid var(--border-dark); padding-bottom: 10px; }
        body.light-mode .gimmick-title { color: var(--text-secondary-light); border-color: var(--border-light); }
        .gimmick-content { display: flex; justify-content: center; align-items: center; min-height: 80px; flex-direction: column; gap: 15px; }
        .ai-tip { font-size: 0.9rem; font-style: italic; color: var(--secondary-dark); text-align: left; width: 100%; }
        body.light-mode .ai-tip { color: var(--secondary-light); }
        .ai-tip span { display: block; margin-bottom: 5px; }
        .ai-tip strong { color: var(--text-dark); }
        body.light-mode .ai-tip strong { color: var(--text-light); }

        #project-list, #pinned-list { list-style: none; padding: 0; }
        #project-list li, #pinned-list li { background: var(--surface-dark); padding: 15px; border-radius: 8px; margin-bottom: 10px; cursor: pointer; transition: background-color .3s; }
        body.light-mode #project-list li, body.light-mode #pinned-list li { background: var(--surface-light); box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        #project-list li:hover, #pinned-list li:hover { background-color: var(--bg-light); }
        body.light-mode #project-list li:hover, body.light-mode #pinned-list li:hover { background-color: #e9e9e9; }
        .item-header { display: flex; justify-content: space-between; align-items: center; }
        .item-name { font-weight: 600; }
        .item-prompt { font-size: 0.9rem; opacity: 0.7; margin-top: 5px; }
        
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); backdrop-filter: blur(5px); z-index: 1000; display: flex; justify-content: center; align-items: center; opacity: 0; visibility: hidden; transition: all .3s; }
        .modal-overlay.active { opacity: 1; visibility: visible; }
        .sprint-modal { background: var(--surface-dark); padding: 30px; border-radius: 16px; text-align: center; max-width: 90%; }
        #sprint-timer { font-size: 3rem; font-weight: 700; color: var(--primary-dark); margin-bottom: 15px; }
        #sprint-prompt { font-size: 1.5rem; }
    </style>
</head>
<body>

    <div class="container">
        <header class="header">
            <h1>Idea Generator</h1>
            <label class="theme-switch">
                <input type="checkbox" id="theme-toggle" />
                <span class="slider"></span>
            </label>
        </header>

        <nav class="tabs"></nav>
        <main id="tabs-content"></main>
    </div>
    
    <div id="sprint-modal-overlay" class="modal-overlay">
        <div class="sprint-modal">
            <h2>Creative Sprint!</h2>
            <div id="sprint-timer">5:00</div>
            <p id="sprint-prompt">‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏ï‡∏±‡∏ß...</p>
            <button id="sprint-close-btn" class="btn btn-secondary" style="margin-top: 20px;">‡∏¢‡∏≠‡∏°‡πÅ‡∏û‡πâ</button>
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // --- DATABASE ---
        const zones = [
            { id: 'drawing', name: "‡∏ß‡∏≤‡∏î‡∏£‡∏π‡∏õ" }, { id: 'photo-manipulation', name: "‡∏ï‡∏±‡∏î‡∏ï‡πà‡∏≠‡∏†‡∏≤‡∏û" },
            { id: 'photography', name: "‡∏ñ‡πà‡∏≤‡∏¢‡∏†‡∏≤‡∏û" }, { id: 'photo-editing', name: "‡πÅ‡∏ï‡πà‡∏á‡∏†‡∏≤‡∏û" },
            { id: 'animation', name: "‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏∞‡∏ä‡∏±‡πà‡∏ô" }, { id: 'rigging', name: "‡∏£‡∏¥‡∏Å‡∏Å‡∏¥‡∏á" },
            { id: 'mixer', name: "‡∏´‡πâ‡∏≠‡∏á‡∏ú‡∏™‡∏°‡πÑ‡∏≠‡πÄ‡∏î‡∏µ‡∏¢" }, { id: 'projects', name: "‡∏Ñ‡∏•‡∏±‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•" }
        ];
        const promptsDB = {
            drawing: { subject: ["‡∏≠‡∏±‡∏®‡∏ß‡∏¥‡∏ô", "‡∏°‡∏±‡∏á‡∏Å‡∏£", "‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå", "‡∏ô‡∏±‡∏Å‡πÄ‡∏ß‡∏ó", "‡πÄ‡∏≠‡∏•‡∏ü‡πå", "‡∏¢‡∏±‡∏Å‡∏©‡πå", "‡∏û‡πà‡∏≠‡∏Ñ‡πâ‡∏≤", "‡∏ô‡∏±‡∏Å‡∏™‡∏≥‡∏£‡∏ß‡∏à"], action: ["‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡πà‡∏≠‡∏™‡∏π‡πâ‡∏Å‡∏±‡∏ö", "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡πâ‡∏ô‡∏û‡∏ö", "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á", "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏´‡∏•‡∏ö‡∏´‡∏ô‡∏µ‡∏à‡∏≤‡∏Å", "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏Å‡∏õ‡πâ‡∏≠‡∏á", "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏ú‡πà‡∏≤‡∏ô"], context: ["‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏•‡∏≠‡∏¢‡∏ü‡πâ‡∏≤", "‡∏ã‡∏≤‡∏Å‡∏õ‡∏£‡∏±‡∏Å‡∏´‡∏±‡∏Å‡∏û‡∏±‡∏á‡πÉ‡∏ï‡πâ‡∏ó‡∏∞‡πÄ‡∏•", "‡∏õ‡πà‡∏≤‡πÄ‡∏£‡∏∑‡∏≠‡∏á‡πÅ‡∏™‡∏á", "‡∏î‡∏≤‡∏ß‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏£‡πâ‡∏≤‡∏á", "‡∏´‡πâ‡∏≠‡∏á‡∏™‡∏°‡∏∏‡∏î‡πÇ‡∏ö‡∏£‡∏≤‡∏ì", "‡∏ï‡∏•‡∏≤‡∏î‡∏Å‡∏•‡∏≤‡∏á‡∏Ñ‡∏∑‡∏ô"] },
            'photo-manipulation': { subject: ["‡∏†‡∏≤‡∏û‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•", "‡∏†‡∏≤‡∏û‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á", "‡∏†‡∏≤‡∏û‡∏ó‡∏¥‡∏ß‡∏ó‡∏±‡∏®‡∏ô‡πå", "‡∏†‡∏≤‡∏û‡∏ï‡∏∂‡∏Å‡πÉ‡∏ô‡πÄ‡∏°‡∏∑‡∏≠‡∏á"], action: ["‡πÉ‡∏´‡πâ‡∏•‡∏≠‡∏¢‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏•‡∏≤‡∏á‡∏≠‡∏≤‡∏Å‡∏≤‡∏®", "‡πÉ‡∏´‡πâ‡πÅ‡∏ï‡∏Å‡∏™‡∏•‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡∏ä‡∏¥‡πâ‡∏ô‡πÄ‡∏•‡πá‡∏Å‡πÜ", "‡πÉ‡∏´‡πâ‡∏£‡∏ß‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏±‡∏ö", "‡πÉ‡∏´‡πâ‡∏°‡∏µ‡πÅ‡∏™‡∏á‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡∏†‡∏≤‡∏¢‡πÉ‡∏ô"], context: ["‡∏†‡∏≤‡∏û‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏î‡∏≤‡∏ß‡∏Å‡∏≤‡πÅ‡∏•‡πá‡∏Å‡∏ã‡∏µ", "‡∏†‡∏≤‡∏û‡∏Ñ‡∏•‡∏∑‡πà‡∏ô‡∏ó‡∏∞‡πÄ‡∏•", "‡∏†‡∏≤‡∏û‡∏•‡∏≤‡∏¢‡πÄ‡∏™‡πâ‡∏ô‡πÄ‡∏£‡∏Ç‡∏≤‡∏Ñ‡∏ì‡∏¥‡∏ï", "‡∏†‡∏≤‡∏û‡πÄ‡∏õ‡∏•‡∏ß‡πÑ‡∏ü"] },
            photography: { subject: ["‡πÄ‡∏á‡∏≤‡∏™‡∏∞‡∏ó‡πâ‡∏≠‡∏ô‡∏ö‡∏ô‡πÅ‡∏≠‡πà‡∏á‡∏ô‡πâ‡∏≥", "‡πÅ‡∏™‡∏á‡πÑ‡∏ü‡∏à‡∏≤‡∏Å‡∏£‡∏ñ‡∏¢‡∏ô‡∏ï‡πå", "‡∏Ñ‡∏ô‡πÄ‡∏î‡∏¥‡∏ô‡∏ñ‡∏ô‡∏ô", "‡∏î‡∏≠‡∏Å‡πÑ‡∏°‡πâ"], action: ["‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ Long Exposure", "‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ‡∏Å‡∏é‡∏™‡∏≤‡∏°‡∏™‡πà‡∏ß‡∏ô", "‡πÉ‡∏ô‡∏°‡∏∏‡∏°‡∏°‡∏≠‡∏á‡πÅ‡∏ö‡∏ö Macro"], context: ["‡πÉ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏•‡∏≤‡∏á‡∏Ñ‡∏∑‡∏ô", "‡∏´‡∏•‡∏±‡∏á‡∏ù‡∏ô‡∏ï‡∏Å", "‡πÅ‡∏ö‡∏ö‡∏†‡∏≤‡∏û‡∏Ç‡∏≤‡∏ß‡∏î‡∏≥"] },
            'photo-editing': { subject: ["‡∏†‡∏≤‡∏û‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•", "‡∏†‡∏≤‡∏û‡∏ó‡∏¥‡∏ß‡∏ó‡∏±‡∏®‡∏ô‡πå", "‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏´‡∏≤‡∏£"], action: ["‡∏õ‡∏£‡∏±‡∏ö‡πÇ‡∏ó‡∏ô‡∏™‡∏µ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ô‡∏ß", "‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡πÅ‡∏ö‡∏ö", "‡πÄ‡∏ô‡πâ‡∏ô‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏™‡∏µ"], context: ["Cyberpunk (‡∏ô‡∏µ‡∏≠‡∏≠‡∏ô)", "‡∏ß‡∏¥‡∏ô‡πÄ‡∏ó‡∏à‡∏ü‡∏¥‡∏•‡πå‡∏°", "Duotone"] },
            animation: { subject: ["‡∏•‡∏π‡∏Å‡∏ö‡∏≠‡∏•", "‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£‡∏™‡πÑ‡∏•‡∏°‡πå", "‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£", "‡∏î‡∏≤‡∏ö"], action: ["‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏î‡πâ‡∏á", "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ß‡∏¥‡πà‡∏á", "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÅ‡∏õ‡∏•‡∏á‡∏£‡πà‡∏≤‡∏á", "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÅ‡∏Å‡∏ß‡πà‡∏á"], context: ["‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏°‡∏µ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏°‡∏≤‡∏Å", "‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏™‡∏π‡∏á", "‡πÅ‡∏ö‡∏ö‡πÄ‡∏ü‡∏£‡∏°‡∏ï‡πà‡∏≠‡πÄ‡∏ü‡∏£‡∏°"] },
            rigging: { subject: ["‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£‡∏°‡∏ô‡∏∏‡∏©‡∏¢‡πå", "‡∏™‡∏±‡∏ï‡∏ß‡πå‡∏™‡∏µ‡πà‡∏Ç‡∏≤", "‡∏õ‡∏•‡∏≤‡∏´‡∏°‡∏∂‡∏Å", "‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå"], action: ["‡πÉ‡∏™‡πà‡∏Å‡∏£‡∏∞‡∏î‡∏π‡∏Å‡∏ó‡∏µ‡πà", "‡∏™‡∏£‡πâ‡∏≤‡∏á Controller ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö", "‡∏ó‡∏≥ Weight Paint ‡∏ö‡∏£‡∏¥‡πÄ‡∏ß‡∏ì"], context: ["‡πÅ‡∏Ç‡∏ô‡πÉ‡∏´‡πâ‡∏°‡∏µ IK/FK Switch", "‡∏ô‡∏¥‡πâ‡∏ß‡∏°‡∏∑‡∏≠‡∏ó‡∏±‡πâ‡∏á‡∏´‡πâ‡∏≤", "‡∏´‡∏ô‡∏ß‡∏î‡πÉ‡∏´‡πâ‡∏Ç‡∏¢‡∏±‡∏ö‡∏≠‡∏¥‡∏™‡∏£‡∏∞"] },
            negativeConstraints: ["‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ‡∏™‡∏µ‡πÅ‡∏î‡∏á", "‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ‡πÄ‡∏™‡πâ‡∏ô‡∏ï‡∏£‡∏á", "‡πÉ‡∏´‡πâ‡∏î‡∏π‡∏ô‡πà‡∏≤‡∏Å‡∏•‡∏±‡∏ß", "‡πÉ‡∏ô‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏°‡∏¥‡∏ô‡∏¥‡∏°‡∏≠‡∏•", "‡πÉ‡∏´‡πâ‡∏°‡∏µ‡πÅ‡∏ï‡πà‡∏≠‡∏á‡∏Ñ‡πå‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏ó‡∏£‡∏á‡∏Å‡∏•‡∏°"]
        };
        const tipsDB = {
            '‡∏≠‡∏±‡∏®‡∏ß‡∏¥‡∏ô': "‡∏•‡∏≠‡∏á‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÄ‡∏Å‡∏£‡∏≤‡∏∞‡∏¢‡∏∏‡∏Ñ‡∏Å‡∏•‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏°‡∏à‡∏£‡∏¥‡∏á", '‡∏°‡∏±‡∏á‡∏Å‡∏£': "‡πÄ‡∏Å‡∏•‡πá‡∏î‡πÅ‡∏•‡∏∞‡∏õ‡∏µ‡∏Å‡∏Ñ‡∏∑‡∏≠‡∏à‡∏∏‡∏î‡πÄ‡∏î‡πà‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏°‡∏±‡∏á‡∏Å‡∏£‡∏î‡∏π‡∏ô‡πà‡∏≤‡πÄ‡∏Å‡∏£‡∏á‡∏Ç‡∏≤‡∏°", '‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå': "‡∏Å‡∏•‡πÑ‡∏Å‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏ï‡πà‡∏≠‡∏Ñ‡∏∑‡∏≠‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏Ç‡∏≠‡∏á‡∏î‡∏µ‡πÑ‡∏ã‡∏ô‡πå",
            '‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏•‡∏≠‡∏¢‡∏ü‡πâ‡∏≤': "‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏∑‡∏°‡∏≠‡∏á‡∏Ñ‡πå‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡πà‡∏≤‡∏°‡∏±‡∏ô‡∏•‡∏≠‡∏¢‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏î‡πâ", 'Long Exposure': "‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏Ç‡∏≤‡∏ï‡∏±‡πâ‡∏á‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏±‡πà‡∏ô‡∏Ñ‡∏á‡∏ô‡∏∞!",
            'Cyberpunk': "‡πÄ‡∏ô‡πâ‡∏ô‡∏Ñ‡∏π‡πà‡∏™‡∏µ‡∏ï‡∏£‡∏á‡∏Ç‡πâ‡∏≤‡∏°‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ä‡∏°‡∏û‡∏π/‡∏ü‡πâ‡∏≤ ‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡πÄ‡∏£‡∏∑‡∏≠‡∏á‡πÅ‡∏™‡∏á (Glow)", '‡∏•‡∏π‡∏Å‡∏ö‡∏≠‡∏•': "‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏∑‡∏°‡∏´‡∏•‡∏±‡∏Å 'Squash and Stretch'!",
            'IK/FK': "IK ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏°‡∏∑‡∏≠‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏ó‡πâ‡∏≤‡πÑ‡∏õ‡∏¢‡∏±‡∏ô‡∏Å‡∏±‡∏ö‡∏™‡∏¥‡πà‡∏á‡∏Ç‡∏≠‡∏á ‡∏™‡πà‡∏ß‡∏ô FK ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÇ‡∏ö‡∏Å‡∏°‡∏∑‡∏≠‡∏≠‡∏¥‡∏™‡∏£‡∏∞"
        };
        
        let sprintTimerInterval = null;
        
        // --- UI ELEMENTS ---
        const tabsContainer = document.querySelector('.tabs');
        const contentContainer = document.getElementById('tabs-content');
        const themeToggle = document.getElementById('theme-toggle');
        const sprintModal = document.getElementById('sprint-modal-overlay');
        const sprintTimerEl = document.getElementById('sprint-timer');
        const sprintPromptEl = document.getElementById('sprint-prompt');
        const sprintCloseBtn = document.getElementById('sprint-close-btn');

        // --- FUNCTIONS ---
        function createTab(zone) {
            const tabLink = document.createElement('button');
            tabLink.className = 'tab-link';
            tabLink.textContent = zone.name;
            tabLink.dataset.tab = zone.id;
            tabsContainer.appendChild(tabLink);
        }

        function createTabContent(zone) {
            const tabContent = document.createElement('div');
            tabContent.id = zone.id;
            tabContent.className = 'tab-content';
            let contentHTML = '';
            switch(zone.id) {
                case 'projects':
                    contentHTML = `<div class="zone-card"><h2 style="margin-bottom:15px;">‡∏Ñ‡∏•‡∏±‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå</h2><ul id="project-list"></ul><h2 style="margin-top:20px;">‡πÑ‡∏≠‡πÄ‡∏î‡∏µ‡∏¢‡∏ó‡∏µ‡πà‡∏õ‡∏±‡∏Å‡∏´‡∏°‡∏∏‡∏î‡πÑ‡∏ß‡πâ</h2><ul id="pinned-list"></ul></div>`;
                    break;
                case 'mixer':
                    const options = zones.filter(z => z.id !== 'projects' && z.id !== 'mixer').map(z => `<option value="${z.id}">${z.name}</option>`).join('');
                    contentHTML = `<div class="zone-card">
                        <div class="prompt-display" id="prompt-mixer">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î‡∏™‡∏∏‡πà‡∏°</div>
                        <div class="gimmick-container">
                            <div class="gimmick-title">AI ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</div>
                            <div class="gimmick-content"><p class="ai-tip" id="tip-mixer"></p></div>
                        </div>
                        <div class="form-group mixer-group" style="flex-direction: row; gap: 10px;">
                            <select id="mixer-base" style="flex:1;">${options}</select>
                            <select id="mixer-style" style="flex:1;">${options}</select>
                        </div>
                        <button class="btn btn-primary randomize-btn" data-zone="mixer">‡∏™‡∏∏‡πà‡∏°‡πÑ‡∏≠‡πÄ‡∏î‡∏µ‡∏¢‡∏ú‡∏™‡∏°</button>
                    </div>`;
                    break;
                default:
                    contentHTML = `
                        <div class="zone-card">
                            <div class="prompt-display" id="prompt-${zone.id}"></div>
                            <div class="gimmick-container">
                                <div class="gimmick-title">AI ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</div>
                                <div class="gimmick-content"><p class="ai-tip" id="tip-${zone.id}"></p></div>
                            </div>
                            <div class="btn-group">
                                <button class="btn btn-primary randomize-btn" data-zone="${zone.id}">‡∏™‡∏∏‡πà‡∏°‡πÑ‡∏≠‡πÄ‡∏î‡∏µ‡∏¢‡πÉ‡∏´‡∏°‡πà</button>
                                <button class="btn btn-tertiary pin-btn" data-zone="${zone.id}">üìå ‡∏õ‡∏±‡∏Å‡∏´‡∏°‡∏∏‡∏î</button>
                            </div>
                            <div class="form-group">
                                <input type="text" id="name-${zone.id}" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå...">
                                <textarea id="notes-${zone.id}" placeholder="‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÇ‡∏ô‡πâ‡∏ï‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°..."></textarea>
                            </div>
                            <div class="btn-group">
                                <button class="btn btn-secondary save-btn" data-zone="${zone.id}">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏ô‡∏µ‡πâ</button>
                                <button class="sprint-mode-btn btn btn-tertiary" data-zone="${zone.id}">üöÄ Sprint!</button>
                            </div>
                        </div>`;
                    break;
            }
            tabContent.innerHTML = contentHTML;
            contentContainer.appendChild(tabContent);
        }

        function setupEventListeners() {
            tabsContainer.addEventListener('click', function(e) {
                if (e.target.classList.contains('tab-link')) setActiveTab(e.target.dataset.tab);
            });
            contentContainer.addEventListener('click', function(e) {
                const target = e.target;
                if (target.classList.contains('randomize-btn')) randomizePrompt(target.dataset.zone);
                if (target.classList.contains('save-btn')) saveProject(target.dataset.zone);
                if (target.classList.contains('pin-btn')) pinIdea(target.dataset.zone);
                if (target.classList.contains('sprint-mode-btn')) startSprint(target.dataset.zone);
                const projectItem = target.closest('.project-item');
                if (projectItem) loadProject(projectItem.dataset.projectId);
                const pinnedItem = target.closest('.pinned-item');
                if (pinnedItem) loadPinnedIdea(pinnedItem.dataset.pinnedId);
            });
            themeToggle.addEventListener('change', function() {
                const theme = themeToggle.checked ? 'light' : 'dark';
                applyTheme(theme);
                localStorage.setItem('theme', theme);
            });
            sprintCloseBtn.addEventListener('click', stopSprint);
        }

        function setActiveTab(tabId) {
            tabsContainer.querySelectorAll('.tab-link').forEach(function(tab) {
                tab.classList.toggle('active', tab.dataset.tab === tabId);
            });
            contentContainer.querySelectorAll('.tab-content').forEach(function(content) {
                content.classList.toggle('active', content.id === tabId);
            });
            localStorage.setItem('lastActiveTab', tabId);
            if (tabId === 'projects') renderProjectLists();
        }

        function randomizePrompt(zoneId) {
            let fullPrompt = "‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î";
            if (zoneId === 'mixer') {
                const baseZoneId = document.getElementById('mixer-base').value;
                const styleZoneId = document.getElementById('mixer-style').value;
                if (baseZoneId === styleZoneId) { alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô"); return; }
                const baseParts = promptsDB[baseZoneId];
                const styleParts = promptsDB[styleZoneId];
                const subject = baseParts.subject[Math.floor(Math.random() * baseParts.subject.length)];
                const action = baseParts.action[Math.floor(Math.random() * baseParts.action.length)];
                const context = styleParts.context[Math.floor(Math.random() * styleParts.context.length)];
                fullPrompt = `${subject} ${action} ${context}`;
            } else {
                const promptParts = promptsDB[zoneId];
                if (!promptParts) return;
                const subject = promptParts.subject[Math.floor(Math.random() * promptParts.subject.length)];
                const action = promptParts.action[Math.floor(Math.random() * promptParts.action.length)];
                const context = promptParts.context[Math.floor(Math.random() * promptParts.context.length)];
                fullPrompt = `${subject} ${action} ${context}`;
                if (Math.random() < 0.25) {
                    const constraint = promptsDB.negativeConstraints[Math.floor(Math.random() * promptsDB.negativeConstraints.length)];
                    fullPrompt += `... ${constraint}`;
                }
            }
            document.getElementById(`prompt-${zoneId}`).textContent = fullPrompt;
            updateAiTip(zoneId, fullPrompt);
        }

        function updateAiTip(zoneId, promptText) {
            const tipEl = document.getElementById(`tip-${zoneId}`);
            if (!tipEl) return;
            const keywords = Object.keys(tipsDB);
            let foundTips = new Set();
            for (const key of keywords) {
   